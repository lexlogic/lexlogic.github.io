{{ $pages := .Pages }}
{{ if .IsHome }}
  {{ $pages = where site.RegularPages "Type" "in" site.Params.mainSections }}
  <div class="grid-1 wrap content"> 
    {{ partial "slider" . }}
  </div>
{{ end }}

{{ if eq site.Params.pinFeatured true }}
  {{ $featured := default 8 site.Params.numberOfPinnedPosts }}
  {{ $featuredPosts := first $featured (where $pages "Params.featured" true)}}
  {{ $normalPosts := $pages | symdiff $featuredPosts }}
  {{ $pages = $featuredPosts | append $normalPosts }}
{{ end }}
<div class="grid-inverse wrap content-article">
  <div>
    <ul class="grid-2 posts" id="posts">
      {{- range (.Paginate $pages).Pages }}
        {{ partial "excerpt-1" . }}
        {{/*  {{ partial "excerpt-2" . }}  */}}
      {{- end }}
      <li>
        {{- template "_internal/pagination.html" . }}
      </li>
    </ul>
  </div>
  {{- partial "sidebar" . }}
</div>
