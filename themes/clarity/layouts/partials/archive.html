{{ $pages := .Pages }}
<div class="grid-1 wrap content-hero">
    {{ partial "slider" . }}
</div>

{{ if eq site.Params.pinFeatured true }}
    {{ $featured := default 8 site.Params.numberOfPinnedPosts }}
    {{ $featuredPosts := first $featured (where $pages "Params.featured" true)}}
    {{ $normalPosts := $pages | symdiff $featuredPosts }}
    {{ $pages = $featuredPosts | append $normalPosts }}
{{ end }}


<div class="grid-inverse wrap content">
    <div class="articles panel">
        {{ if eq .IsHome false }}
            <div class="title-wrap main-title">
                <div class="taxonomy-title">
                    <span class="mt-4">{{ humanize .Data.Term | title }}</span>
                </div>
                <a class="title-link" href="/post">View all</a>
            </div>
        {{ else }}
            {{ $pages = where .Site.Pages ".Params.news_post" true }}
            <div class="title-wrap main-title">
                <div class="taxonomy-title">
                    <span class="mt-4">Latest News</span>
                </div>
                <a class="title-link" href="/post">View all</a>
            </div>
        {{ end }}
        <ul class="grid-2 posts" id="posts">
            {{- range $index, $name := (.Paginate $pages).Pages }}
                {{ if eq $index 0 }}
                    {{ partial "excerpt-1" . }}
                {{ end }}
            {{- end }}
            <div class="grid-1">
                {{- range $index, $name := (.Paginate $pages).Pages }}
                    {{ if ne $index 0 }}
                        {{ partial "excerpt-2" . }}
                    {{ end }}
                {{- end }}
            </div>
        </ul>
    </div>
    {{- partial "sidebar" . }}
</div>
